function select_menu(e){var a="#"+e;$(a).hasClass("active")||($(a).removeClass("active"),$(a).removeClass("expand"),$(a).addClass("active expand"),$(a).find(".collapse").addClass("show"))}function createDataTable(e,a,t){var r=$("#dataTable").DataTable({autoWidth:!1,oSearch:{sSearch:t},responsive:{details:{type:"column",target:-1}},order:[[0,"DESC"]],columnDefs:[{responsivePriority:1,targets:-1},{orderable:!1,targets:e}],deferRender:!0,language:{paginate:{first:"<<",previous:"<",next:">",last:">>"},sLengthMenu:"Mostrar _MENU_ registros",sInfo:"Mostrando _START_ al _END_ de _TOTAL_ elementos",sInfoEmpty:"No hay datos para mostrar",sEmptyTable:"No hay datos para mostrar",sInfoFiltered:"(filtrado de _MAX_ elementos en total)",sLoadingRecords:"Cargando...",sProcessing:"Procesando...",sSearch:"Buscar:",sZeroRecords:"No se encontraron resultados"},processing:!0,serverSide:!0,ajax:a});return $(".toggle-vis").change(function(e){e.preventDefault();var a=r.column($(this).attr("data-column"));this.checked?a.visible(!0):a.visible(!1)}),r}function filterColumn(e){e&&(value=$("#col"+e+"_filter").val(),$("#dataTable").DataTable().column(e).search(value))}function createDelete(e,a,t){Swal.fire({title:"CONFIRMACI\xd3N",text:"Esta acci\xf3n no se podr\xe1 deshacer. Seguro que desea eliminar este elemento?",type:"error",showCancelButton:!0,confirmButtonClass:"btn btn-danger",cancelButtonClass:"btn btn-light",cancelButtonText:"No, cancelar!",confirmButtonText:"Si, eliminar!",showLoaderOnConfirm:!0,preConfirm:function(){$.ajax({url:e,data:{_token:t},method:"POST"}).always(function(){swal.close(),window.location.href=a})}})}function createDeleteAll(dataTable,route){var ch=[],i=0,set=$("#dataTable").find('tbody > tr > td input[type="checkbox"]');$(set).each(function(){$(this).is(":checked")&&(ch[i]=$(this).attr("value"),i+=1)}),0!=i?Swal.fire({title:"CONFIRMACI\xd3N",text:"Esta acci\xf3n no se podr\xe1 deshacer. Seguro que desea eliminar los elementos seleccionados?",type:"error",showCancelButton:!0,confirmButtonClass:"btn btn-danger",cancelButtonClass:"btn btn-light",cancelButtonText:"No, cancelar!",confirmButtonText:"Si, eliminar!",showLoaderOnConfirm:!0,preConfirm:function(){$.ajax({url:Routing.generate(route,{data:ch}),method:"POST"}).done(function(e){toastr.success(e.texto,"Notificaci\xf3n"),$(".group-checkable").prop("checked",""),dataTable.ajax.reload()}).fail(function(e,status,errorThrown){if("Forbidden"==errorThrown){var r="No tienes los permisos necesarios para realizar esta operaci\xf3n";toastr.error(r,"Notificaci\xf3n")}else{var r=eval("("+e.responseText+")");toastr.error(r.texto,"Notificaci\xf3n")}}).always(function(){swal.close()})}}):toastr.warning("No existen elementos seleccionados","Notificaci\xf3n")}$(document).ready(function(){$("body .wrapper").css("visibility","visible"),$("body .wrapper").css("opacity",1),$(".page-preloader").fadeOut("slow"),$(".datetimepicker").datetimepicker({format:"DD-MM-YYYY",locale:"es",maxDate:"now"}),select2=$(".select2").select2({language:"es",theme:"bootstrap4",placeholder:""}),$(".group-checkable").prop("checked",""),$(".group-checkable").change(function(){var e=$("#dataTable").find('tbody > tr > td input[type="checkbox"]'),a=$(this).prop("checked");$(e).each(function(){$(this).prop("checked",a)})}),$("#form").validate({errorElement:"div",errorPlacement:function(e,a){var t=$(a).parent().find("span.error");0==t.length&&(t=$(a).parent().parent().find("span.error")),e.insertAfter(t),$("div .error").addClass("invalid-feedback")},highlight:function(e){$(e).addClass("is-invalid")},unhighlight:function(e){$(e).removeClass("is-invalid")}}),$("#form .select2").change(function(){$("#form").validate().element($(this))})}),$(document).on("click","#boton_insertar",function(){$("#operacion").attr("value","Insertar"),$(".modal-title").html('<i class="fas fa-plus"></i> Insertar Registro'),$(".form-control").removeClass("is-invalid"),$(".invalid-feedback").remove(),$(".form").trigger("reset"),$(".form textarea").val(""),$(".form .select2").val("").trigger("change"),$(".ROLE_PROCESO").addClass("d-none")}),$(document).on("click",".editar",function(){var e=$(this).attr("id");$("#operacion").attr("value","Editar"),$(".form-control").removeClass("is-invalid"),$(".invalid-feedback").remove(),$(".form").trigger("reset"),$(".form textarea")&&$(".form textarea").val(""),$(".form .select2")&&$(".form .select2").val("").trigger("change"),$("#usuario_password_first").removeAttr("required"),$("#usuario_password_second").removeAttr("required"),$(".ROLE_PROCESO").addClass("d-none"),modal=$(this).attr("modal"),$.ajax({url:Routing.generate($(this).attr("route")),method:"POST",data:{id:e},dataType:"json",success:function(a){modal?($("#"+modal).modal("show"),$("#"+modal+" #id").val(e)):($(".modal").modal("show"),$(".modal #id").val(e)),$(".modal-title").html('<i class="fas fa-pencil-alt"></i> Editar Registro'),$.each(a,function(e){$(".form input[ident="+e+"]")&&$(".form input[ident="+e+"]").val(a[e]),$(".form select[ident="+e+"]")&&$(".form select[ident="+e+"]").val(a[e]).trigger("change"),$(".form textarea[ident="+e+"]")&&$(".form textarea[ident="+e+"]").val(a[e])}),$(".proceso").is(":checked")&&$(".ROLE_PROCESO").removeClass("d-none")}})});
